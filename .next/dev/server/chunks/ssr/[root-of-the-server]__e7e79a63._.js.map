{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { Pool } from 'pg'\nimport { PrismaPg } from '@prisma/adapter-pg'\n\nconst prismaClientSingleton = () => {\n    const pool = new Pool({ connectionString: process.env.DATABASE_URL })\n    const adapter = new PrismaPg(pool)\n    return new PrismaClient({ adapter })\n}\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClientSingleton | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? prismaClientSingleton()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,wBAAwB;IAC1B,MAAM,OAAO,IAAI,qJAAI,CAAC;QAAE,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAAC;IACnE,MAAM,UAAU,IAAI,uKAAQ,CAAC;IAC7B,OAAO,IAAI,sMAAY,CAAC;QAAE;IAAQ;AACtC;AAIA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/server/services/tenant.service.ts"],"sourcesContent":["import { prisma } from '@/lib/prisma'\nimport { auth, currentUser } from '@clerk/nextjs/server'\n\nexport async function getCurrentTenant() {\n    const { userId, orgId } = await auth();\n    if (!userId) return null;\n    const clerkId = orgId || userId;\n\n    let tenant = await prisma.tenant.findUnique({\n        where: { clerkId },\n    })\n\n    if (!tenant) {\n        const user = await currentUser();\n        const name = (await auth()).orgId ? 'Organization' : (user?.firstName ? `${user.firstName}'s Store` : 'My Store')\n\n        tenant = await prisma.tenant.create({\n            data: {\n                clerkId,\n                name,\n            },\n        })\n    }\n\n    return tenant\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;;;;AAEO,eAAe;IAClB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,2LAAI;IACpC,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,UAAU,SAAS;IAEzB,IAAI,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE;QAAQ;IACrB;IAEA,IAAI,CAAC,QAAQ;QACT,MAAM,OAAO,MAAM,IAAA,yMAAW;QAC9B,MAAM,OAAO,CAAC,MAAM,IAAA,2LAAI,GAAE,EAAE,KAAK,GAAG,iBAAkB,MAAM,YAAY,GAAG,KAAK,SAAS,CAAC,QAAQ,CAAC,GAAG;QAEtG,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAChC,MAAM;gBACF;gBACA;YACJ;QACJ;IACJ;IAEA,OAAO;AACX"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/app/dashboard/page.tsx"],"sourcesContent":["import { getCurrentTenant } from '@/server/services/tenant.service'\nimport { prisma } from '@/lib/prisma'\n\nexport default async function DashboardPage() {\n    const tenant = await getCurrentTenant()\n\n    if (!tenant) {\n        return <div>Unauthorized</div>\n    }\n\n    // Get statistics\n    const [customerCount, integrationCount, productCount] = await Promise.all([\n        prisma.customer.count({ where: { tenantId: tenant.id } }),\n        prisma.integration.count({\n            where: {\n                customer: {\n                    tenantId: tenant.id,\n                },\n            },\n        }),\n        prisma.product.count({ where: { tenantId: tenant.id } }),\n    ])\n\n    return (\n        <div>\n            <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard</h1>\n                <p className=\"text-sm text-gray-500\">Welcome, {tenant?.name}</p>\n            </div>\n\n            <div className=\"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                <div className=\"rounded-lg bg-white p-6 shadow-sm\">\n                    <h3 className=\"text-sm font-medium text-gray-500\">Customers</h3>\n                    <p className=\"mt-2 text-3xl font-bold text-gray-900\">{customerCount}</p>\n                </div>\n                <div className=\"rounded-lg bg-white p-6 shadow-sm\">\n                    <h3 className=\"text-sm font-medium text-gray-500\">Active Integrations</h3>\n                    <p className=\"mt-2 text-3xl font-bold text-gray-900\">{integrationCount}</p>\n                </div>\n                <div className=\"rounded-lg bg-white p-6 shadow-sm\">\n                    <h3 className=\"text-sm font-medium text-gray-500\">Pending Sync Jobs</h3>\n                    <p className=\"mt-2 text-3xl font-bold text-gray-900\">0</p>\n                </div>\n                <div className=\"rounded-lg bg-white p-6 shadow-sm\">\n                    <h3 className=\"text-sm font-medium text-gray-500\">Products Synced</h3>\n                    <p className=\"mt-2 text-3xl font-bold text-gray-900\">{productCount}</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;;AAEe,eAAe;IAC1B,MAAM,SAAS,MAAM,IAAA,kKAAgB;IAErC,IAAI,CAAC,QAAQ;QACT,qBAAO,8OAAC;sBAAI;;;;;;IAChB;IAEA,iBAAiB;IACjB,MAAM,CAAC,eAAe,kBAAkB,aAAa,GAAG,MAAM,QAAQ,GAAG,CAAC;QACtE,8HAAM,CAAC,QAAQ,CAAC,KAAK,CAAC;YAAE,OAAO;gBAAE,UAAU,OAAO,EAAE;YAAC;QAAE;QACvD,8HAAM,CAAC,WAAW,CAAC,KAAK,CAAC;YACrB,OAAO;gBACH,UAAU;oBACN,UAAU,OAAO,EAAE;gBACvB;YACJ;QACJ;QACA,8HAAM,CAAC,OAAO,CAAC,KAAK,CAAC;YAAE,OAAO;gBAAE,UAAU,OAAO,EAAE;YAAC;QAAE;KACzD;IAED,qBACI,8OAAC;;0BACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAE,WAAU;;4BAAwB;4BAAU,QAAQ;;;;;;;;;;;;;0BAG3D,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAAyC;;;;;;;;;;;;kCAE1D,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAAyC;;;;;;;;;;;;kCAE1D,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;;kCAEzD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAAyC;;;;;;;;;;;;;;;;;;;;;;;;AAK1E"}}]
}