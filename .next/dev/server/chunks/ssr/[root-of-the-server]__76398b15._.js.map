{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { Pool } from 'pg'\nimport { PrismaPg } from '@prisma/adapter-pg'\n\nconst prismaClientSingleton = () => {\n    const pool = new Pool({ connectionString: process.env.DATABASE_URL })\n    const adapter = new PrismaPg(pool)\n    return new PrismaClient({ adapter })\n}\n\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClientSingleton | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? prismaClientSingleton()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,wBAAwB;IAC1B,MAAM,OAAO,IAAI,qJAAI,CAAC;QAAE,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAAC;IACnE,MAAM,UAAU,IAAI,uKAAQ,CAAC;IAC7B,OAAO,IAAI,sMAAY,CAAC;QAAE;IAAQ;AACtC;AAIA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/server/services/tenant.service.ts"],"sourcesContent":["import { prisma } from '@/lib/prisma'\nimport { auth, currentUser } from '@clerk/nextjs/server'\n\nexport async function getCurrentTenant() {\n    const { userId, orgId } = await auth();\n    if (!userId) return null;\n    const clerkId = orgId || userId;\n\n    let tenant = await prisma.tenant.findUnique({\n        where: { clerkId },\n    })\n\n    if (!tenant) {\n        const user = await currentUser();\n        const name = (await auth()).orgId ? 'Organization' : (user?.firstName ? `${user.firstName}'s Store` : 'My Store')\n\n        tenant = await prisma.tenant.create({\n            data: {\n                clerkId,\n                name,\n            },\n        })\n    }\n\n    return tenant\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;;;;;AAEO,eAAe;IAClB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,2LAAI;IACpC,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,UAAU,SAAS;IAEzB,IAAI,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE;QAAQ;IACrB;IAEA,IAAI,CAAC,QAAQ;QACT,MAAM,OAAO,MAAM,IAAA,yMAAW;QAC9B,MAAM,OAAO,CAAC,MAAM,IAAA,2LAAI,GAAE,EAAE,KAAK,GAAG,iBAAkB,MAAM,YAAY,GAAG,KAAK,SAAS,CAAC,QAAQ,CAAC,GAAG;QAEtG,SAAS,MAAM,8HAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAChC,MAAM;gBACF;gBACA;YACJ;QACJ;IACJ;IAEA,OAAO;AACX"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/server/queries/logs.ts"],"sourcesContent":["import { prisma } from '@/lib/prisma'\nimport { getCurrentTenant } from '@/server/services/tenant.service'\n\nexport async function getRecentLogs(limit = 100) {\n    const tenant = await getCurrentTenant()\n    if (!tenant) return []\n\n    return await prisma.log.findMany({\n        where: { tenantId: tenant.id },\n        orderBy: { createdAt: 'desc' },\n        take: limit,\n    })\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;;AAEO,eAAe,cAAc,QAAQ,GAAG;IAC3C,MAAM,SAAS,MAAM,IAAA,kKAAgB;IACrC,IAAI,CAAC,QAAQ,OAAO,EAAE;IAEtB,OAAO,MAAM,8HAAM,CAAC,GAAG,CAAC,QAAQ,CAAC;QAC7B,OAAO;YAAE,UAAU,OAAO,EAAE;QAAC;QAC7B,SAAS;YAAE,WAAW;QAAO;QAC7B,MAAM;IACV;AACJ"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/flavioazoup/Desenvolvimento/central_integracoes/src/app/dashboard/logs/page.tsx"],"sourcesContent":["import { getRecentLogs } from '@/server/queries/logs'\nimport { formatDistanceToNow } from 'date-fns'\nimport { AlertCircle, Info, AlertTriangle, XCircle } from 'lucide-react'\n\nexport default async function LogsPage() {\n    const logs = await getRecentLogs()\n\n    const getIcon = (level: string) => {\n        switch (level) {\n            case 'error':\n                return <XCircle className=\"h-5 w-5 text-red-500\" />\n            case 'warn':\n                return <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />\n            case 'info':\n                return <Info className=\"h-5 w-5 text-blue-500\" />\n            default:\n                return <AlertCircle className=\"h-5 w-5 text-gray-500\" />\n        }\n    }\n\n    const getBgColor = (level: string) => {\n        switch (level) {\n            case 'error':\n                return 'bg-red-50'\n            case 'warn':\n                return 'bg-yellow-50'\n            case 'info':\n                return 'bg-blue-50'\n            default:\n                return 'bg-gray-50'\n        }\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Logs</h1>\n            </div>\n\n            <div className=\"overflow-hidden rounded-lg bg-white shadow\">\n                <div className=\"px-4 py-5 sm:px-6\">\n                    <h3 className=\"text-base font-semibold leading-6 text-gray-900\">System Logs</h3>\n                    <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">\n                        Recent system events and errors\n                    </p>\n                </div>\n                <div className=\"border-t border-gray-200\">\n                    <ul role=\"list\" className=\"divide-y divide-gray-200\">\n                        {logs.length === 0 ? (\n                            <li className=\"px-4 py-4 sm:px-6 text-center text-sm text-gray-500\">\n                                No logs found.\n                            </li>\n                        ) : (\n                            logs.map((log) => (\n                                <li\n                                    key={log.id}\n                                    className={`px-4 py-4 sm:px-6 hover:bg-gray-50 ${getBgColor(log.level)}`}\n                                >\n                                    <div className=\"flex items-start gap-3\">\n                                        <div className=\"flex-shrink-0 mt-0.5\">{getIcon(log.level)}</div>\n                                        <div className=\"flex-1 min-w-0\">\n                                            <div className=\"flex items-center justify-between\">\n                                                <p className=\"text-sm font-medium text-gray-900 uppercase\">\n                                                    {log.level}\n                                                </p>\n                                                <p className=\"text-xs text-gray-500\">\n                                                    {formatDistanceToNow(new Date(log.createdAt), {\n                                                        addSuffix: true,\n                                                    })}\n                                                </p>\n                                            </div>\n                                            <p className=\"mt-1 text-sm text-gray-700\">{log.message}</p>\n                                            {log.details && (\n                                                <details className=\"mt-2\">\n                                                    <summary className=\"cursor-pointer text-xs text-gray-600 hover:text-gray-900\">\n                                                        View details\n                                                    </summary>\n                                                    <pre className=\"mt-2 text-xs bg-gray-100 p-2 rounded overflow-x-auto\">\n                                                        {JSON.stringify(log.details, null, 2)}\n                                                    </pre>\n                                                </details>\n                                            )}\n                                        </div>\n                                    </div>\n                                </li>\n                            ))\n                        )}\n                    </ul>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;;;;;;;;;AAEe,eAAe;IAC1B,MAAM,OAAO,MAAM,IAAA,iJAAa;IAEhC,MAAM,UAAU,CAAC;QACb,OAAQ;YACJ,KAAK;gBACD,qBAAO,8OAAC,uNAAO;oBAAC,WAAU;;;;;;YAC9B,KAAK;gBACD,qBAAO,8OAAC,yOAAa;oBAAC,WAAU;;;;;;YACpC,KAAK;gBACD,qBAAO,8OAAC,0MAAI;oBAAC,WAAU;;;;;;YAC3B;gBACI,qBAAO,8OAAC,mOAAW;oBAAC,WAAU;;;;;;QACtC;IACJ;IAEA,MAAM,aAAa,CAAC;QAChB,OAAQ;YACJ,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BAAmC;;;;;;;;;;;0BAGrD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAkD;;;;;;0CAChE,8OAAC;gCAAE,WAAU;0CAAuC;;;;;;;;;;;;kCAIxD,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAG,MAAK;4BAAO,WAAU;sCACrB,KAAK,MAAM,KAAK,kBACb,8OAAC;gCAAG,WAAU;0CAAsD;;;;;uCAIpE,KAAK,GAAG,CAAC,CAAC,oBACN,8OAAC;oCAEG,WAAW,CAAC,mCAAmC,EAAE,WAAW,IAAI,KAAK,GAAG;8CAExE,cAAA,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAI,WAAU;0DAAwB,QAAQ,IAAI,KAAK;;;;;;0DACxD,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDAAI,WAAU;;0EACX,8OAAC;gEAAE,WAAU;0EACR,IAAI,KAAK;;;;;;0EAEd,8OAAC;gEAAE,WAAU;0EACR,IAAA,yKAAmB,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;oEAC1C,WAAW;gEACf;;;;;;;;;;;;kEAGR,8OAAC;wDAAE,WAAU;kEAA8B,IAAI,OAAO;;;;;;oDACrD,IAAI,OAAO,kBACR,8OAAC;wDAAQ,WAAU;;0EACf,8OAAC;gEAAQ,WAAU;0EAA2D;;;;;;0EAG9E,8OAAC;gEAAI,WAAU;0EACV,KAAK,SAAS,CAAC,IAAI,OAAO,EAAE,MAAM;;;;;;;;;;;;;;;;;;;;;;;;mCAvBlD,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqC/C"}}]
}